<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Sortable Table</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>


    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        .ui-state-default {
            padding: 8px;
            margin-right: 5px;
            margin-bottom: 5px;
            font-size: 1.2em;
            height: 18px;
            cursor: pointer;
        }

        .ui-state-highlight {
            height: 1.5em;
            line-height: 1.2em;
            border: 1px solid red;
            background-color: #FFFFCC;
        }
    </style>
</head>

<body>
    <table id="my-table">
        <thead>
            <tr>
                <th>handle</th>
                <th>순번</th>
                <th>이름</th>
                <th>나이</th>
                <th>성별</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="handle">&#9776;</td>
                <td>1</td>
                <td>John</td>
                <td>35</td>
                <td>남성</td>
            </tr>
            <tr>
                <td class="handle">&#9776;</td>
                <td>2</td>
                <td>Jane</td>
                <td>28</td>
                <td>여성</td>
            </tr>
            <tr>
                <td class="handle">&#9776;</td>
                <td>3</td>
                <td>Jane</td>
                <td>28</td>
                <td>여성</td>
            </tr>
            <tr>
                <td class="handle">&#9776;</td>
                <td>4</td>
                <td>Jane</td>
                <td>28</td>
                <td>여성</td>
            </tr>
        </tbody>
    </table>
    <script>
        $(function () {
            $("#my-table tbody").sortable({
                handle: ".handle",
                helper: function (e, tr) {
                    var $originals = tr.children();
                    var $helper = tr.clone();
                    $helper.children(':nth-child(n+4)').remove(); // 첫번째와 두번째 열 이외의 열 삭제
                    var widths = $originals.map(function () {
                        return $(this).width();
                    });
                    $helper.each(function (index) {
                        $(this).width(widths[index]);
                    });
                    return $helper;
                },
                stop: function (e, ui) {
                    var sortedRows = $("#my-table tbody tr");
                    sortedRows.each(function (i) {
                        var row = $(this);
                        row.find(".row-number").html(i + 1);
                    });
                }
            }).disableSelection();
        });

    </script>
</body>